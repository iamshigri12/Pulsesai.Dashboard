<div [@routerTransition]>
    <section class="content-header">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <h1>{{ 'Live Sensor Data' | localize }}</h1>
                </div>
            </div>
        </div>
    </section>
    <section class="content px-2">

        <div class="dashboard">
            <h2>Live Sensor Dashboard</h2>

            <!-- Stats -->
            <div class="stats">
                <p>Count: {{ stats.count }}</p>
                <p>Average: {{ stats.avg | number:'1.1-2' }}</p>
                <p>Minimum: {{ stats.min | number:'1.1-2' }}</p>
                <p>Maximum: {{ stats.max | number:'1.1-2' }}</p>
            </div>

            <!-- Live Chart -->
            <div class="chart-container">
                <canvas id="telemetryChart"></canvas>
            </div>

            <!-- Alerts -->
            <div class="alerts">
                <h3>Alerts (last 20 readings)</h3>
                <ul>
                    <li *ngFor="let r of readings" [ngClass]="{ anomaly: isAnomaly(r.value) }">
                        {{ r.timestamp | date:'mediumTime' }} â†’ {{ r.value | number:'1.2-2' }}
                    </li>
                </ul>
            </div>
        </div>
    </section>
</div>
